{"ast":null,"code":"var _jsxFileName = \"/home/wellington/\\xC1rea de Trabalho/projects/sd-016-b-project-recipes-app/src/components/Favorite.jsx\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport favoriteIcon from '../images/blackHeartIcon.svg';\nimport notfavoriteIcon from '../images/whiteHeartIcon.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst makeItem = (recipe, food) => ({\n  id: recipe.idMeal || recipe.idDrink,\n  type: food ? 'food' : 'drink',\n  nationality: recipe.strArea || '',\n  category: recipe.strCategory,\n  alcoholicOrNot: recipe.strAlcoholic || '',\n  name: recipe.strMeal || recipe.strDrink,\n  image: recipe.strMealThumb || recipe.strDrinkThumb\n});\n\nexport default function Favorite(props) {\n  _s();\n\n  const {\n    recipe,\n    food\n  } = props;\n  const id = recipe.idMeal || recipe.idDrink;\n  const [buttonFav, setButtonFav] = useState(false);\n  const [favorites, setFavorites] = useState([]);\n  useEffect(() => {\n    if (localStorage.getItem('favoriteRecipes')) {\n      // carrega favoritos\n      const fav = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      setFavorites(fav);\n      setButtonFav(fav.find(e => e.id === id));\n    }\n  }, [recipe]);\n\n  const toogleFav = () => {\n    const storage = localStorage.getItem('favoriteRecipes'); // falta o teste se já está favoritado?\n\n    if (storage !== null && JSON.parse(storage).find(e => e.id === id)) {\n      localStorage.setItem('favoriteRecipes', JSON.stringify(favorites.filter(e => e.id !== id)));\n      setFavorites(favorites.filter(i => i.id !== id));\n    } else {\n      const item = makeItem(recipe, food);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favorites, item]));\n      setFavorites([...favorites, item]);\n    }\n\n    setButtonFav(!buttonFav);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    onClick: toogleFav,\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      \"data-testid\": \"favorite-btn\",\n      src: buttonFav ? favoriteIcon : notfavoriteIcon,\n      alt: \"heart-icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Favorite, \"X/VJ+7Iu1NwJj64HFU31Qs8FAHs=\");\n\n_c = Favorite;\nFavorite.propTypes = {\n  recipe: PropTypes.shape({}),\n  food: PropTypes.bool\n}.isRequired;\n\nvar _c;\n\n$RefreshReg$(_c, \"Favorite\");","map":{"version":3,"sources":["/home/wellington/Área de Trabalho/projects/sd-016-b-project-recipes-app/src/components/Favorite.jsx"],"names":["PropTypes","React","useEffect","useState","favoriteIcon","notfavoriteIcon","makeItem","recipe","food","id","idMeal","idDrink","type","nationality","strArea","category","strCategory","alcoholicOrNot","strAlcoholic","name","strMeal","strDrink","image","strMealThumb","strDrinkThumb","Favorite","props","buttonFav","setButtonFav","favorites","setFavorites","localStorage","getItem","fav","JSON","parse","find","e","toogleFav","storage","setItem","stringify","filter","i","item","propTypes","shape","bool","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport favoriteIcon from '../images/blackHeartIcon.svg';\nimport notfavoriteIcon from '../images/whiteHeartIcon.svg';\n\nconst makeItem = (recipe, food) => ({\n  id: recipe.idMeal || recipe.idDrink,\n  type: food ? 'food' : 'drink',\n  nationality: recipe.strArea || '',\n  category: recipe.strCategory,\n  alcoholicOrNot: recipe.strAlcoholic || '',\n  name: recipe.strMeal || recipe.strDrink,\n  image: recipe.strMealThumb || recipe.strDrinkThumb,\n});\n\nexport default function Favorite(props) {\n  const { recipe, food } = props;\n  const id = recipe.idMeal || recipe.idDrink;\n  const [buttonFav, setButtonFav] = useState(false);\n  const [favorites, setFavorites] = useState([]);\n\n  useEffect(() => {\n    if (localStorage.getItem('favoriteRecipes')) { // carrega favoritos\n      const fav = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      setFavorites(fav);\n      setButtonFav(fav.find((e) => e.id === id));\n    }\n  }, [recipe]);\n\n  const toogleFav = () => {\n    const storage = localStorage.getItem('favoriteRecipes');\n    // falta o teste se já está favoritado?\n    if (storage !== null && JSON.parse(storage).find((e) => e.id === id)) {\n      localStorage.setItem('favoriteRecipes',\n        JSON.stringify(favorites.filter((e) => e.id !== id)));\n      setFavorites(favorites.filter((i) => i.id !== id));\n    } else {\n      const item = makeItem(recipe, food);\n      localStorage.setItem('favoriteRecipes',\n        JSON.stringify([...favorites, item]));\n      setFavorites([...favorites, item]);\n    }\n    setButtonFav(!buttonFav);\n  };\n  return (\n    <button\n      type=\"button\"\n      onClick={ toogleFav }\n    >\n      <img\n        data-testid=\"favorite-btn\"\n        src={ buttonFav ? favoriteIcon : notfavoriteIcon }\n        alt=\"heart-icon\"\n      />\n    </button>\n  );\n}\n\nFavorite.propTypes = {\n  recipe: PropTypes.shape({}),\n  food: PropTypes.bool,\n}.isRequired;\n"]},"metadata":{},"sourceType":"module"}